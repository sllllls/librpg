############
# world.py #
############

================
World (abstract)
================

A World is a set of WorldMaps (Maps that belong to a World) that allows teleporting from one map to another.

-----
Usage
-----

The World class is abstract, requiring the factory-like create_map() method to be overridden.

To use a World, inherit a class from it (for example MyWorld) and write its create_map() method such that it returns an instance of the WorldMap corresponding to the passed index. Instantiate MyWorld passing its State (if the WorldMaps will load from it) and its Party, then call its gameloop().

----------
Attributes
----------

party: Party
The Party which will be placed in the WorldMaps.

state: State
The State from which the WorldMaps may load. Contains necessarily a local_state called "party current location", mapping to a tuple (map_id, Position(x, y)).

-------
Methods
-------

__init__(party: Party, state: State)
Constructor.

create_map(map_id: int) -> WorldMap (abstract)
This function should instantiate the class inheriting from WorldMap that corresponds to the given 'map_id'.

schedule_teleport(map_id: int, position: Position)
Sets the teleport place where the party should be sent to when the gameloop of the current map returns.

gameloop()
Sends the control flow to the WorldMap where the party's position was saved and then, whenever the current map's gameloop() returns, sends the party to the scheduled teleport target.

=======================
WorldMap: Map (virtual)
=======================

A WorldMap is a Map that belongs to a World. The biggest difference between it and a regular map is that it can teleport the party to other WorldMaps.

-----
Usage
-----

Use a WorldMap just like a Map, except it should be attributed a map_id and 'registered' in its World's world.create_map() method.

----------
Attributes
----------

world: World
The world to which the WorldMap belongs.

id: int
The map_id used to create the map.

-------
Methods
-------

schedule_teleport(map_id: int, position: Position)
Sets the teleport place if the world to where the party should be sent when the gameloop of the current map returns.
